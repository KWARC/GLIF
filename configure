#!/bin/bash

function read_gf_bin() {
    cat << EOF
Please state the location of your gf binary. Leave the prompt empty to use /usr/bin/gf.
EOF

    printf "GF_BIN="
    read GF_BIN
    echo "export GF_BIN=$GF_BIN"
}

function read_gf_lib() {
    cat << EOF
Please state your GF source directory. The source directory for the kernel
will permanently be set to this directory. Leaving the prompt empty will
result in the default option.
EOF

    printf "GF_LIB="
    read GF_LIB
    echo "export GF_LIB=$GF_LIB"
}

function add_gf_bin_to_profile() {
    echo "export GF_BIN=$GF_BIN" >> $HOME/.profile
    echo "Added GF_BIN to $HOME/.profile"
}

function add_gf_lib_to_profile() {
    echo "export GF_LIB=$GF_LIB" >> $HOME/.profile
    echo "Added GF_LIB to $HOME/.profile"
}


function main() {
    echo "GF kernel configuration"

    echo ""
    read_gf_bin

    echo ""
    read_gf_lib

    echo ""
    echo "Writing confiuration"
    if [ ! -z "$GF_BIN" ]
    then
        add_gf_bin_to_profile
    fi;
    
    if [ ! -z "$GF_LIB" ]
    then
        add_gf_lib_to_profile
    fi;

    cat << EOF
The configuration will be written into $HOME/.profile for the changes to take effect please reboot
your PC or log out of your current user account. If you want to change the configuration please do so in $HOME/.profile.
EOF

    echo "Done. "
}

main
